function [accumulator] = HDRSolver(images, dt, gRed, gGreen, gBlue)
    zMid = 128;
    zMax = 256;
    
    % If Z >Zmid: w = Zmax -Z 
    accumulator = zeros(size(images{1}));
    
    for i=1:size(images,2)
        
        im = double(images{i});
        
        zred= im(:,:,1);
        w=zred;          
        w(zred>zMid)=zMax-zred(zred>zMid); 
        
        accumulator(:,:,1)=  w.*reshape(gRed(zred+1)-dt(1,i), size(zred)); % add g(Zij)-log(tj) to accumulator image
        accumulator(:,:,2)=  w.*reshape(gRed(zred+1)-dt(1,i), size(zred));
        accumulator(:,:,3)=  w.*reshape(gRed(zred+1)-dt(1,i), size(zred));
        
        hdr = hdr + accumulator;
        
    end
    accumulator=(accumulator-min(accumulator(:)))/(max(accumulator(:))-min(accumulator(:)));
    %ekv 6


end
